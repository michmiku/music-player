{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\micha\\\\Desktop\\\\port\\\\portfolio\\\\portfolio\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import axios from'axios';import{Link}from'react-router-dom';import{AuthenticatedUser}from\"../contexts/AuthenticatedUser.js\";import Settings from\"../Settings.json\";var Login=function Login(){var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=useContext(AuthenticatedUser),authUser=_useContext.authUser,setAuthUser=_useContext.setAuthUser;var handleSubmit=function handleSubmit(e){e.preventDefault();var userData={username:user.username,password:user.password};axios.post(Settings.server+'users/login',userData).then(function(res){if(res.data===''){alert(\"Wrong username or password!\");}else{setAuthUser({username:user.username,admin:res.data[0].admin});localStorage.setItem('user',user.username);localStorage.setItem('admin',res.data[0].admin);}}).catch(function(err){return console.log(err);});setUser({username:'',password:''});};return authUser.username===\"\"||authUser.username==='null'?/*#__PURE__*/React.createElement(\"div\",{align:\"center\",className:\"mt-5\",style:{color:\"rgb(201, 201, 201)\"}},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Username: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",minLength:\"3\",required:true,className:\"form-control\",style:{width:\"250px\"},value:user.username,onChange:function onChange(e){setUser({username:e.target.value,password:user.password});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",minLength:\"6\",required:true,className:\"form-control\",style:{width:\"250px\"},value:user.password,onChange:function onChange(e){setUser({username:user.username,password:e.target.value});}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"btn btn-dark\"})))):/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron\",style:{backgroundColor:'rgb(82, 82, 82)',color:'rgb(201, 201, 201)'}},/*#__PURE__*/React.createElement(\"h1\",{className:\"display-4\"},\"You are logged in!\"),/*#__PURE__*/React.createElement(\"p\",{className:\"lead\"},\"You have successfully logged in to your account!\"),/*#__PURE__*/React.createElement(\"hr\",{className:\"my-4\"}),/*#__PURE__*/React.createElement(\"p\",null,\"If you want to start listening to music press the button below!\"),/*#__PURE__*/React.createElement(Link,{className:\"btn btn-dark btn-lg\",to:\"/music\",role:\"button\"},\"Music library\"));};export default Login;","map":{"version":3,"sources":["C:/Users/micha/Desktop/port/portfolio/portfolio/src/components/Login.js"],"names":["React","useState","useContext","axios","Link","AuthenticatedUser","Settings","Login","username","password","user","setUser","authUser","setAuthUser","handleSubmit","e","preventDefault","userData","post","server","then","res","data","alert","admin","localStorage","setItem","catch","err","console","log","color","width","target","value","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react'\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom'\r\nimport { AuthenticatedUser } from \"../contexts/AuthenticatedUser.js\"\r\nimport Settings from \"../Settings.json\"\r\n\r\nconst Login = () => {\r\n    const [user, setUser] = useState({ username: '', password: '' });\r\n    const { authUser, setAuthUser } = useContext(AuthenticatedUser)\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        const userData = {\r\n            username: user.username,\r\n            password: user.password\r\n        }\r\n        axios.post(Settings.server + 'users/login', userData)\r\n            .then(res => {\r\n                if (res.data === '') {\r\n                    alert(\"Wrong username or password!\")\r\n                }\r\n                else {\r\n                    setAuthUser({ username: user.username, admin: res.data[0].admin })\r\n                    localStorage.setItem('user', user.username)\r\n                    localStorage.setItem('admin', res.data[0].admin)\r\n                }\r\n            })\r\n            .catch(err => console.log(err));\r\n        setUser({ username: '', password: '' })\r\n    }\r\n    return (\r\n        authUser.username === \"\" || authUser.username === 'null' ?\r\n            <div align=\"center\" className=\"mt-5\" style={{ color: \"rgb(201, 201, 201)\" }}>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label>Username: </label>\r\n                        <input type=\"text\"\r\n                            minLength=\"3\"\r\n                            required\r\n                            className=\"form-control\"\r\n                            style={{ width: \"250px\" }}\r\n                            value={user.username}\r\n                            onChange={(e) => { setUser({ username: e.target.value, password: user.password }) }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Password: </label>\r\n                        <input type=\"password\"\r\n                            minLength=\"6\"\r\n                            required\r\n                            className=\"form-control\"\r\n                            style={{ width: \"250px\" }}\r\n                            value={user.password}\r\n                            onChange={(e) => { setUser({ username: user.username, password: e.target.value }) }}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" value=\"Login\" className=\"btn btn-dark\" />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            :\r\n            <div className=\"jumbotron\" style={{ backgroundColor: 'rgb(82, 82, 82)', color: 'rgb(201, 201, 201)' }}>\r\n                <h1 className=\"display-4\">You are logged in!</h1>\r\n                <p className=\"lead\">You have successfully logged in to your account!</p>\r\n                <hr className=\"my-4\" />\r\n                <p>If you want to start listening to music press the button below!</p>\r\n                <Link className=\"btn btn-dark btn-lg\" to=\"/music\" role=\"button\">Music library</Link>\r\n            </div>\r\n    )\r\n}\r\nexport default Login"]},"metadata":{},"sourceType":"module"}