{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\micha\\\\Desktop\\\\port\\\\portfolio\\\\portfolio\\\\src\\\\components\\\\Music.js\";\nimport React, { useState, useContext, useEffect, useRef } from \"react\";\nimport { AuthenticatedUser } from \"../contexts/AuthenticatedUser.js\";\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport Player from \"./Player.js\";\n\nconst Music = () => {\n  const [musicList, setMusicList] = useState({\n    music: []\n  });\n  const [src, setSrc] = useState({\n    src: ''\n  });\n  const [isPlaying, setIsPlaying] = useState({\n    playing: false\n  });\n  const {\n    authUser,\n    setAuthUser\n  } = useContext(AuthenticatedUser);\n  const player = useRef(null);\n  useEffect(() => {\n    axios.get('http://localhost:5000/music/').then(res => {\n      setMusicList({\n        music: res.data\n      });\n    }).catch(err => console.log(err));\n  }, []);\n\n  const handleTitleClick = file => {\n    setSrc({\n      src: 'http://localhost:5000/music/' + file\n    });\n    setIsPlaying({\n      playing: true\n    });\n    player.current.load();\n    player.current.play();\n  };\n\n  const handlePlay = file => {\n    // if (src.src === 'http://localhost:5000/music/' + file) {\n    setIsPlaying({\n      playing: true\n    });\n    player.current.play();\n    console.log('1'); // }\n    // else {\n    //     setSrc({ src: 'http://localhost:5000/music/' + file })\n    //     setIsPlaying({ playing: true })\n    //     player.current.load()\n    //     player.current.play()\n    //     console.log('2')\n    // }\n  };\n\n  const handlePause = () => {\n    setIsPlaying({\n      playing: false\n    });\n    player.current.pause();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, authUser.username != '' ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cont\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"music-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"top-view\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 29\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 29\n    }\n  }, \"Author\")), musicList.music.map(({\n    file\n  }, key) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"middle-view\",\n    key: key,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 33\n    }\n  }, key), /*#__PURE__*/React.createElement(\"a\", {\n    onClick: () => {\n      handleTitleClick(file);\n    },\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 33\n    }\n  }, file), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"author\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"Author\"), !(src.src === 'http://localhost:5000/music/' + file && isPlaying.playing) ? /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => {\n      handlePlay(file);\n    },\n    className: \"far fa-play-circle play-button-list fa-2x\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 37\n    }\n  }) : /*#__PURE__*/React.createElement(\"i\", {\n    onClick: () => {\n      handlePause();\n    },\n    className: \"far fa-pause-circle fa-2x play-button-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 37\n    }\n  })))), /*#__PURE__*/React.createElement(Player, {\n    isPlaying: isPlaying,\n    handlePlay: () => {\n      handlePlay();\n    },\n    handlePause: () => {\n      handlePause();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"audio\", {\n    ref: player,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"source\", {\n    src: src.src,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 25\n    }\n  }))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"card-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, \"You are not logged in!\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"In order to browse and listen to music you need to either login to your account or create a new one.\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    className: \"btn btn-primary mr-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    className: \"btn btn-primary \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, \"Register\")));\n};\n\nexport default Music;","map":{"version":3,"sources":["C:/Users/micha/Desktop/port/portfolio/portfolio/src/components/Music.js"],"names":["React","useState","useContext","useEffect","useRef","AuthenticatedUser","Link","axios","Player","Music","musicList","setMusicList","music","src","setSrc","isPlaying","setIsPlaying","playing","authUser","setAuthUser","player","get","then","res","data","catch","err","console","log","handleTitleClick","file","current","load","play","handlePlay","handlePause","pause","username","map","key"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect, useRef } from \"react\";\r\nimport { AuthenticatedUser } from \"../contexts/AuthenticatedUser.js\"\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport Player from \"./Player.js\";\r\n\r\nconst Music = () => {\r\n    const [musicList, setMusicList] = useState({ music: [] })\r\n    const [src, setSrc] = useState({ src: '' })\r\n    const [isPlaying, setIsPlaying] = useState({ playing: false })\r\n    const { authUser, setAuthUser } = useContext(AuthenticatedUser)\r\n    const player = useRef(null)\r\n\r\n    useEffect(() => {\r\n        axios.get('http://localhost:5000/music/')\r\n            .then(res => {\r\n                setMusicList({ music: res.data })\r\n\r\n            })\r\n            .catch(err => console.log(err));\r\n    }, [])\r\n\r\n    const handleTitleClick = (file) => {\r\n        setSrc({ src: 'http://localhost:5000/music/' + file })\r\n        setIsPlaying({ playing: true })\r\n        player.current.load()\r\n        player.current.play()\r\n    }\r\n    const handlePlay = (file) => {\r\n\r\n        // if (src.src === 'http://localhost:5000/music/' + file) {\r\n        setIsPlaying({ playing: true })\r\n        player.current.play()\r\n        console.log('1')\r\n        // }\r\n        // else {\r\n        //     setSrc({ src: 'http://localhost:5000/music/' + file })\r\n        //     setIsPlaying({ playing: true })\r\n        //     player.current.load()\r\n        //     player.current.play()\r\n        //     console.log('2')\r\n        // }\r\n\r\n    }\r\n    const handlePause = () => {\r\n        setIsPlaying({ playing: false })\r\n        player.current.pause()\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {authUser.username != '' ?\r\n                <div className=\"cont\">\r\n                    <div className=\"music-container\">\r\n                        <div className=\"top-view\">\r\n                            <a className=\"number\">#</a>\r\n                            <a className=\"title\">Title</a>\r\n                            <a className=\"author\">Author</a>\r\n                        </div>\r\n                        {musicList.music.map(({ file }, key) => (\r\n                            <div className=\"middle-view\" key={key}>\r\n                                <a className=\"number\">{key}</a>\r\n                                <a onClick={() => { handleTitleClick(file) }} className=\"title\">{file}</a>\r\n                                <a className=\"author\">Author</a>\r\n                                {!((src.src === 'http://localhost:5000/music/' + file) && (isPlaying.playing)) ?\r\n                                    <i onClick={() => { handlePlay(file) }} className=\"far fa-play-circle play-button-list fa-2x\"></i> :\r\n                                    <i onClick={() => { handlePause() }} className=\"far fa-pause-circle fa-2x play-button-list\"></i>\r\n                                }\r\n                            </div>\r\n                        ))\r\n                        }\r\n                    </div>\r\n                    <Player isPlaying={isPlaying} handlePlay={() => { handlePlay() }} handlePause={() => { handlePause() }} />\r\n                    <audio ref={player}>\r\n                        <source src={src.src} />\r\n                    </audio>\r\n                </div>\r\n\r\n                :\r\n                <div className=\"card-body\">\r\n                    <h5 className=\"card-title\">You are not logged in!</h5>\r\n                    <p className=\"card-text\">In order to browse and listen to music you need to either login to your account or create a new one.</p>\r\n                    <Link to=\"/login\" className=\"btn btn-primary mr-3 \">Login</Link>\r\n                    <Link to=\"/register\" className=\"btn btn-primary \">Register</Link>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Music;\r\n\r\n"]},"metadata":{},"sourceType":"module"}